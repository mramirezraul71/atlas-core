# =========================
# LLM / OLLAMA
# =========================
OLLAMA_BASE_URL=http://127.0.0.1:11434

LLM_MODEL_FAST=llama3.2:3b
LLM_MODEL_CHAT=llama3.1:latest
LLM_MODEL_CODE=deepseek-coder:6.7b
LLM_MODEL_REASON=deepseek-r1:14b
LLM_MODEL_TOOLS=qwen2.5:7b

LLM_FAST_MAX_CHARS=900
LLM_CHAT_MAX_CHARS=6000
LLM_REASON_MIN_CHARS=1800

LLM_TIMEOUT_CONNECT=5
LLM_TIMEOUT_READ=120

LLM_DEFAULT_ROUTE=CHAT
LLM_ENABLE_AUDIT=true

# =========================
# HUMANOID / UPDATE SYSTEM
# =========================
HUMANOID_ENABLED=true
UPDATE_MODE=plan_only            # plan_only | apply
UPDATE_APPLY=false               # si false, NUNCA ejecuta instalaciones
UPDATE_SNAPSHOT_BEFORE=true
UPDATE_ALLOW_PIP_UPGRADE=false   # si false, no actualiza pip autom√°ticamente

# Git-based Windows Update Engine
UPDATE_ENABLED=true
UPDATE_REMOTE=origin
UPDATE_BRANCH=main
UPDATE_STAGING_BRANCH=staging
UPDATE_REQUIRE_SMOKE=true
UPDATE_AUTO_PROMOTE=false
UPDATE_ALLOW_ROLLBACK=true

# Seguridad: comandos permitidos
HANDS_SAFE_MODE=true
HANDS_ALLOWED_PREFIXES=pip,python,git,uvicorn,pytest,Invoke-RestMethod,where,Get-Command

# =========================
# POLICY / AUDIT / METRICS
# =========================
AUDIT_DB_PATH=C:\ATLAS_PUSH\logs\atlas_audit.sqlite
AUDIT_ENABLED=true

POLICY_MODE=strict          # strict | permissive
POLICY_DEFAULT_ROLE=owner

# carpetas permitidas (CSV)
POLICY_ALLOWED_PATHS=C:\ATLAS_PUSH,C:\ATLAS_PUSH\logs,C:\ATLAS_PUSH\snapshots

# allowlist de prefijos de comandos (CSV)
POLICY_ALLOWED_COMMAND_PREFIXES=pip,python,git,uvicorn,pytest,where,Get-Command,Invoke-RestMethod,curl.exe

# acciones sensibles
POLICY_ALLOW_KILL_PROCESS=false
POLICY_ALLOW_UPDATE_APPLY=false

# =========================
# SCHEDULER / WATCHDOG / HEALING
# =========================
SCHED_ENABLED=true
SCHED_DB_PATH=C:\ATLAS_PUSH\logs\atlas_sched.sqlite
SCHED_TICK_SECONDS=2
SCHED_MAX_CONCURRENCY=1
SCHED_DEFAULT_RETRIES=3
SCHED_BACKOFF_SECONDS=5
SCHED_LEASE_SECONDS=30
SCHED_STALE_RECOVERY=true

WATCHDOG_ENABLED=true

# =========================
# OWNER CONTROL (Zero-Trust)
# =========================
OWNER_ENABLED=true
OWNER_ID=raul
OWNER_STRICT_MODE=true
OWNER_SESSION_TTL_SECONDS=900
OWNER_REQUIRE_SESSION_FOR_RISK=medium
OWNER_2FA_REQUIRED_FOR=critical
OWNER_APPROVAL_DEFAULT_TTL_SECONDS=900
OWNER_SESSION_TIMEOUT=900

APPROVALS_CHAIN_ENABLED=true
APPROVALS_CHAIN_SECRET=CHANGE_ME_LONG_RANDOM
APPROVALS_REPLAY_TTL_SECONDS=3600
APPROVAL_EXPIRE_MINUTES=15

EMERGENCY_MODE=false
EMERGENCY_BLOCK_DEPLOY=true
EMERGENCY_BLOCK_REMOTE_EXEC=true
EMERGENCY_BLOCK_SHELL=true
EMERGENCY_ALLOW_STATUS=true

TELEGRAM_APPROVALS_ENABLED=true
TELEGRAM_ALLOWED_CHAT_IDS=
TELEGRAM_REQUIRE_CONFIRM=true
OWNER_TELEGRAM_CONFIRM=true

VOICE_APPROVALS_ENABLED=true
VOICE_REQUIRE_CONFIRM=true
OWNER_VOICE_CONFIRM=true

# =========================
# GOVERNED AUTONOMY
# =========================
GOVERNED_AUTONOMY_ENABLED=true
GA_MODE=plan_only
GA_SAFE_AUTORUN_ENABLED=true
GA_SAFE_AUTORUN_LIMIT=2
GA_APPROVAL_REQUIRED_FOR=medium
GA_CYCLE_INTERVAL_MINUTES=60
GA_MAX_FINDINGS=10
GA_REPORT_DIR=C:\ATLAS_PUSH\snapshots\ga
GA_STRICT_EVIDENCE=true
GA_POST_UPDATE_AUTOCHECK=true
GA_POST_DEPLOY_HEALTH_MIN=75
WATCHDOG_TICK_SECONDS=5
WATCHDOG_MAX_ERROR_RATE=0.3
WATCHDOG_MAX_LATENCY_MS=4000

HEALING_ENABLED=true
HEALING_MAX_RESTARTS=3
HEALING_RESTART_WINDOW_SECONDS=600
